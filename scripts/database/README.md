# Database Scripts

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€Supabaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç®¡ç†ãƒ»ãƒ†ã‚¹ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ”§ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### `add-columns.mjs`
å¿…è¦ãªã‚«ãƒ©ãƒ ã‚’matchesãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ ã—ã¾ã™ã€‚
```bash
node scripts/database/add-columns.mjs
```
- tournament_generation, tournament_gender, tournament_category, round_name ã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã®å‹•ä½œç¢ºèªã‚‚å®Ÿè¡Œ

### `supabase-migration.sql`
Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§å®Ÿè¡Œã™ã‚‹SQLã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- æ‰‹å‹•ã§ã‚«ãƒ©ãƒ ã‚’è¿½åŠ ã™ã‚‹å ´åˆã«ä½¿ç”¨
- SQL Editorã§å®Ÿè¡Œã—ã¦ãã ã•ã„

### `add-round-column.sql`  
å›æˆ¦æƒ…å ±ã‚«ãƒ©ãƒ è¿½åŠ å°‚ç”¨ã®SQLã‚¹ã‚¯ãƒªãƒ—ãƒˆ

## ğŸ§ª ãƒ†ã‚¹ãƒˆãƒ»ç¢ºèª

### `test-db.mjs`
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã¨ã‚«ãƒ©ãƒ å­˜åœ¨ã®ç¢ºèª
```bash
node scripts/database/test-db.mjs
```
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æŒ¿å…¥ãƒ»å‰Šé™¤ã§å‹•ä½œç¢ºèª
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ä¸è¶³ã‚«ãƒ©ãƒ ã‚’æ¤œçŸ¥

### `check-db.mjs`
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã®ç¢ºèª
```bash
node scripts/database/check-db.mjs
```

### `check-db-structure.js`
è©³ç´°ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ã®æ¤œæŸ»ï¼ˆCommonJSç‰ˆï¼‰

### `test-round-column.mjs`
round_nameã‚«ãƒ©ãƒ ã®å‹•ä½œãƒ†ã‚¹ãƒˆ
```bash
node scripts/database/test-round-column.mjs
```

## ğŸ“ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ

### `create-test-match.mjs`
ã‚«ãƒ†ã‚´ãƒªãƒ»å›æˆ¦æƒ…å ±ä»˜ãã®ãƒ†ã‚¹ãƒˆãƒãƒƒãƒã‚’ä½œæˆ
```bash
node scripts/database/create-test-match.mjs
```
- å®Œå…¨ãªãƒãƒƒãƒãƒ‡ãƒ¼ã‚¿ï¼ˆã‚²ãƒ¼ãƒ å«ã‚€ï¼‰ã‚’ä½œæˆ
- æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ

## ğŸ” ç’°å¢ƒå¤‰æ•°

ã™ã¹ã¦ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯`.env.local`ã‹ã‚‰ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿ã¾ã™ï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
SUPABASE_SERVICE_KEY=your_service_key
```

## ğŸ“‹ å®Ÿè¡Œé †åºï¼ˆåˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼‰

1. ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆ`.env.local`ï¼‰
2. `add-columns.mjs` ã§ã‚«ãƒ©ãƒ è¿½åŠ 
3. `create-test-match.mjs` ã§ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ
4. `test-db.mjs` ã§å‹•ä½œç¢ºèª

## âš ï¸ æ³¨æ„äº‹é …

- æœ¬ç•ªç’°å¢ƒã§ã¯æ…é‡ã«å®Ÿè¡Œã—ã¦ãã ã•ã„
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¯é©å®œå‰Šé™¤ã—ã¦ãã ã•ã„  
- SQLãƒ•ã‚¡ã‚¤ãƒ«ã¯æ‰‹å‹•å®Ÿè¡ŒãŒå¿…è¦ã§ã™
- ã™ã¹ã¦ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä»˜ãã§ã™